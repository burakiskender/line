<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Client.html">Client</a><ul class='members'><li data-type='member'><a href="Client.html#.Events">Events</a></li><li data-type='member'><a href="Client.html#.States">States</a></li></ul><ul class='methods'><li data-type='method'><a href="Client.html#connect">connect</a></li><li data-type='method'><a href="Client.html#disconnect">disconnect</a></li><li data-type='method'><a href="Client.html#ping">ping</a></li><li data-type='method'><a href="Client.html#send">send</a></li><li data-type='method'><a href="Client.html#sendWithoutResponse">sendWithoutResponse</a></li></ul></li><li><a href="Message.html">Message</a><ul class='methods'><li data-type='method'><a href="Message.html#reject">reject</a></li><li data-type='method'><a href="Message.html#resolve">resolve</a></li></ul></li><li><a href="Server.html">Server</a><ul class='members'><li data-type='member'><a href="Server.html#.Events">Events</a></li></ul><ul class='methods'><li data-type='method'><a href="Server.html#broadcast">broadcast</a></li><li data-type='method'><a href="Server.html#getConnectionById">getConnectionById</a></li><li data-type='method'><a href="Server.html#getRoom">getRoom</a></li><li data-type='method'><a href="Server.html#getRoomsOf">getRoomsOf</a></li><li data-type='method'><a href="Server.html#removeFromAllRooms">removeFromAllRooms</a></li><li data-type='method'><a href="Server.html#start">start</a></li><li data-type='method'><a href="Server.html#stop">stop</a></li></ul></li><li><a href="ServerConnection.html">ServerConnection</a><ul class='members'><li data-type='member'><a href="ServerConnection.html#.Events">Events</a></li><li data-type='member'><a href="ServerConnection.html#.States">States</a></li></ul><ul class='methods'><li data-type='method'><a href="ServerConnection.html#close">close</a></li><li data-type='method'><a href="ServerConnection.html#getRooms">getRooms</a></li><li data-type='method'><a href="ServerConnection.html#joinRoom">joinRoom</a></li><li data-type='method'><a href="ServerConnection.html#leaveRoom">leaveRoom</a></li><li data-type='method'><a href="ServerConnection.html#ping">ping</a></li><li data-type='method'><a href="ServerConnection.html#send">send</a></li><li data-type='method'><a href="ServerConnection.html#sendWithoutResponse">sendWithoutResponse</a></li></ul></li><li><a href="ServerRoom.html">ServerRoom</a><ul class='methods'><li data-type='method'><a href="ServerRoom.html#add">add</a></li><li data-type='method'><a href="ServerRoom.html#broadcast">broadcast</a></li><li data-type='method'><a href="ServerRoom.html#getConnectionById">getConnectionById</a></li><li data-type='method'><a href="ServerRoom.html#getConnectionsCount">getConnectionsCount</a></li><li data-type='method'><a href="ServerRoom.html#remove">remove</a></li></ul></li></ul>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>line</h1><p><a href="https://travis-ci.org/signalive/line"><img src="https://travis-ci.org/signalive/line.svg?branch=master" alt="Build Status"></a>
<a href="https://coveralls.io/github/signalive/line?branch=master"><img src="https://coveralls.io/repos/github/signalive/line/badge.svg?branch=master" alt="Coverage Status"></a></p>
<p><em>line</em> is a lightweight and efficient (web)-socket library that bears non-blocking interface and scalable architecture.  <em>line</em> is <strong>fast</strong>, <strong>reliable</strong> and yet it supports <strong>message responses</strong>, <strong>response timeouts</strong> and <strong>client rooms</strong>. <em>line</em> internally monitors connection health, and it pro-actively strives to achieve a stable connection.</p>
<p>We built <em>line</em> on top of the fastest socket implementation in the Node.JS ecosystem, <a href="https://github.com/uWebSockets/uWebSockets">uWebSockets</a>. In that respect, it consumes order of magnitude <strong>less memory</strong> when compared to socket.io and it's kinds. <em>line</em> runs on Node.JS and all modern browsers through an identical API. Therefore, it is a good candidate for cross-platform applications.</p>
<h2>Key Features</h2><ul>
<li>Automated tests with significant code coverage</li>
<li><strong>Cross platforms</strong>: Works on MacOS, Linux, Windows and browsers</li>
<li>Developed in ES6 with Webpack, therefore we have a minified bundles that work nearly every platform without hassle</li>
<li>Apart from uWebSockets, we support <strong>message responses</strong>, <strong>request timeouts</strong>, <strong>handshaking</strong> and <strong>client rooms</strong></li>
<li><strong>Easy configuring</strong>: Configurations are asserted on server side and pushed to clients at handshake. No need to do configurations at the client side.</li>
<li>Promise based API</li>
</ul>
<hr>
<h2>Installation</h2><p>Using yarn</p>
<pre class="prettyprint source"><code>yarn add line-socket</code></pre><p>Using npm</p>
<pre class="prettyprint source lang-sh"><code>npm install line-socket --save</code></pre><h2>Usage</h2><h3>Server</h3><pre class="prettyprint source lang-js"><code>const Server = require('line-socket/server');
const server = new Server({port: 3000});

/* Handshaking handler which is called first when a new connections arrives */
server.on('handshake', (connection, handshake) => {
    /* handshale.payload is the client's handshake data such as authorization token etc... */

    handshake.resolve(); /* Accept connection */
    /* handshake.reject(new Error('Sorry bro')) to reject the connection */
});

/* Connection handler is called after client handshaking succeeds */
server.on('connection', function(connection) {
    console.log('A client connected');

    connection.on('request', message => {
        console.log('Received a request', message.payload);

        setTimeout(function() {
            console.log('Responding...');
            message.resolve({domates: 'patates'});
        }, 2000)
    });

    connection.on('_close', code => {
        console.log(` ${code} closed`);
    })
})


server
    .start() // Start listening port 3000
    .then(_ => {
        console.log('Server started');
    })
    .catch(err => {
        console.log(`Server could not started`, err);
    });</code></pre><h3>Client (NodeJS)</h3><pre class="prettyprint source lang-js"><code>const LineClient = require('line-socket/client-node');
const client = new LineClient('ws://localhost:3000', {
    reconnect: true,
    handshakePayload: {token: 'secret-token-xyz'}
});


client
    .connect()
    .then(() => {
        console.log('Client has connected');
    })
    .catch(err => {
        console.log('Connection error', err);
    });

/* Connected event is fired when handshake is succeed */
client.on('_connected', function() {
    console.log(`Client connected`);
    console.log('Sending message to server');
    client
        .send('request', {foo: 'bar'})
        .then(response => {
            console.log('Response recieved', response);
        })
        .catch(err => {
            /* Requests can fail by response or when timeout exceeds */
            console.log('Request failed', err);
        });
});</code></pre><h3>Client (Browser)</h3><p>We provide client constructor as LineClient global reference. In order to run line client on browser, you must include the browser bundle into your HTML file as below and then use it by creating an instance from <em>LineClient</em> class.</p>
<pre class="prettyprint source"><code>&lt;script src=&quot;../dist/client-web-globals.js&quot;>&lt;/script></code></pre><pre class="prettyprint source lang-js"><code>const client = new LineClient('ws://localhost:3000', {
    reconnect: true,
    handshakePayload: {token: 'secret-token-xyz'}
});

/* The rest is identical to the NodeJS example */</code></pre><h2>Documentation</h2><p>Extended documentation can be found <a href="https://signalive.github.io/line">here</a>.</p>
<hr>
<h2>License</h2><p><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br /><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><strong><em>line</em></strong></span> by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">SignAlive</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p></article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Wed Nov 23 2016 15:29:49 GMT+0300 (+03) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>